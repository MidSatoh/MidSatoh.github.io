<!DOCTYPE html>
<html lang="ja-jp">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>pyenvによるインストール（Mac） - MID-S</title>
<meta name="generator" content="Hugo 0.59.0" />
<link href="https://midsatoh.github.io/index.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://midsatoh.github.io/python/install/pyenv/">
<link rel="stylesheet" href="https://midsatoh.github.io/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://midsatoh.github.io/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<script src="https://midsatoh.github.io/js/bundle.js"></script><style>
:root {
  
  
}
</style>
</head>
<body><div class="container"><header>
<h1>MID-S</h1>

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/">Home</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>pyenvによるインストール（Mac）</h1>

<h2 id="pyenvとは">pyenvとは</h2>

<p>Macのように、OSにPythonがプリインストールされているようなマシンを利用する場合、インストーラなどでpythonをインストールしてPATHを切り替えてしまったり、PythonのバージョンによってはOSの挙動や別のアプリケーションに影響を及ぼす可能性がある。
そのため、インストーラを使用するのではなく開発用のディレクトリ毎に切り替えることが必要になる場合が多い。</p>

<p>Macで複数のPythonをインストールし、開発環境を切り替えるためのツールがpyenvである。</p>

<p>pyenvをインストールするには、MacportやHomebrewというMacでのパッケージ管理システムを利用してインストールすることが多い。</p>

<p>本サイトでは、Homebrewからpyenvをインストールする。</p>

<h2 id="homebrewのインストール">Homebrewのインストール</h2>

<p>Homebrewとは、Macで開発を行う場合のパッケージ管理ツールである。
ただし、Homebrewを使用する場合は</p>

<ul>
<li>XCodeまたはApple DeveloperサイトからXCodeコマンドラインツールのインストール</li>
<li>インターネットへの安定した接続環境</li>
</ul>

<p>が前提となる。
XCodeをインストールしている場合は問題がないが、XCodeはMacOSおよびiOS、iPadOS開発用の統合開発環境であるためサイズがかなり大きい。
マシンスペックなどの問題でXCodeをインストールできない場合は、軽量なXCode小マンドラインツールをインストールする必要がある。</p>

<h3 id="xcodeコマンドラインツールのインストール">XCodeコマンドラインツールのインストール</h3>

<p>XCodeコマンドラインツールは、Appleの開発者用サイトからダウンロード可能である。
その際には、Appleアカウントが必要となる。</p>

<p>Apple Developer Site：<a href="https://developer.apple.com/develop/" target="_blank">https://developer.apple.com/develop/</a></p>

<p><img src="/images/python/install/apple_developer.png" alt="Apple Developer Site" /></p>

<p>ダウンロードリンクを押すと、Appleアカウントでのログインが求められる。
ログインするとツールの検索画面となるので、検索画面に「command line」、ReleaseDateを降順にすると最新版のツールを探すことが可能となる。betaがついていないツールをダウンロードすると良い。</p>

<p><img src="/images/python/install/xcode_command_line.png" alt="コマンドラインツールの検索" /></p>

<p>ダウンロードしたpkgファイルを利用し、インストールする。</p>

<h3 id="homebrewのインストール-1">Homebrewのインストール</h3>

<p>初めて使用する場合は、以下のサイトからインストールコマンドをコピーして、ターミナルに貼り付けて実行することでインストールが可能。</p>

<p><a href="https://brew.sh/index_ja" target="_blank">Homebrew</a></p>

<p><img src="/images/python/install/homebrew_site.png" alt="Homebrewのサイト" /></p>

<h2 id="pyenvのインストール">pyenvのインストール</h2>

<p>homebrewがインストールされると、brewコマンドが利用可能となる。<code>brew install インストールするパッケージ</code>で様々な開発ツールがインストール可能となる。</p>

<p><code>brew install</code>コマンドを実施する際には、インターネットに接続されている必要がある。
pyenvのインストールは、以下のコマンドとなる。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% brew install pyenv</code></pre></div>
<p>Mac OS Catalinaからは、ターミナルのデフォルトシェルがbashからzshとなった。
そのため、pyenvの設定内容を<code>~/.zprofile</code>に以下を追加する。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh"><span class="nb">export</span> <span class="nv">PYENV_ROOT</span><span class="o">=</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>/.pyenv
<span class="k">if</span> <span class="o">[</span> -d <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PYENV_ROOT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">PYENV_ROOT</span><span class="si">}</span>/bin:<span class="nv">$PATH</span>
    <span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>pyenv init -<span class="k">)</span><span class="s2">&#34;</span>
<span class="k">fi</span></code></pre></div>
<div class="panel panel-notice"><div class="panel-body">

zshではなくbashを利用しているMacの場合は、上記の内容は「~/.bash_profile」に記載する。

</div>
</div>

<h3 id="pyenvインストールの確認">pyenvインストールの確認</h3>

<p>pyenvのコマンドを実行し、インストールが完了しているか確認する。
今回はpyenvでインストールできるバージョンの一覧を表示させてみる。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% pyenv install -l
Available versions:
    <span class="m">2</span>.1.3
    <span class="m">2</span>.2.3
    <span class="m">2</span>.3.7
    <span class="m">2</span>.4
    <span class="m">2</span>.4.1
    <span class="m">2</span>.4.2
    <span class="m">2</span>.4.3
    <span class="m">2</span>.4.4
    .........</code></pre></div>
<div class="panel panel-primary"><div class="panel-body">

pyenv install -l でインストールしたいバージョンが表示されない場合は、pyenvのバージョンが古くなっている場合がある。
その場合は、
<pre>
% brew upgrade pyenv
</pre>
を使ってpyenv自体のアップグレードを行う必要がある。

</div>
</div>

<h4 id="pyenvによる使用バージョンのインストール">pyenvによる使用バージョンのインストール</h4>

<p><code>pyenv install バージョン指定</code>で必要なバージョンのインストールが可能となる。
例えば、3.8.0と3.6.9をインストールする場合は以下のようになる。pyenvもインターネットへの接続が必須である。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% pyenv install <span class="m">3</span>.8.0
・・・
% pyenv install <span class="m">3</span>.6.9</code></pre></div>
<p>pyenvでインストールされたPythonは、<code>~/.pyenv</code>以下にインストールされている。
インストールされているバージョンを確認するためのコマンドは、<code>pyenv versions</code>である。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">$ pyenv versions
system <span class="o">(</span><span class="nb">set</span> by /Users/ユーザー名/.pyenv/version<span class="o">)</span>
    <span class="m">3</span>.8.0
    <span class="m">3</span>.6.9</code></pre></div>
<h4 id="使用するpythonのバージョンを確定する">使用するPythonのバージョンを確定する</h4>

<p>デフォルトで使用したいバージョンを指定する場合は<code>global</code>、特定のディレクトリのみで使用するバージョンを指定するには、使用したいフォルダに移動したのち<code>local</code>オプションを使用する。
Macの場合は、基本的にはglovalは使用しない方が良い。
例えば、<code>~/Python38</code>では3.8.0を、<code>~/Python36</code>では3.6.9を設定したいとする。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% mkdir ~/Python38  <span class="c1"># ディレクトリの作成</span>
% <span class="nb">cd</span> ~/Python38     <span class="c1"># ディレクトリへ移動</span>
% pyenv <span class="nb">local</span> <span class="m">3</span>.8.0 <span class="c1"># 現在のディレクトリで使用するPythonのバージョンを指定</span>
% python --version  <span class="c1"># pythonコマンドのバージョン確認</span>
 Python3.8.0        <span class="c1"># 実行結果</span>
% mkdir ~/Python36
% <span class="nb">cd</span> ~/Python36
% pyenv <span class="nb">local</span> <span class="m">3</span>.6.9
% python --version
 Python3.6.9</code></pre></div>
<p>上記の例の場合、<code>~/Python38</code>と<code>~/Python36</code>では指定のバージョンが、それ以外のディレクトリではOSでプリインストールされたpythonが使用される。</p>

<h3 id="pyenvでのanacondaインストール">pyenvでのAnacondaインストール</h3>

<p>pyenvでもAnacondaのインストールが可能である。ただし、pyenvに最新版のAnacondaが反映されるには公式でのダウンロードよりも若干のタイムラグが発生するため注意。</p>

<p>pyenvでインストールできるAnacondaのバージョンを確認するには、grepと組み合わせると良い。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% pyenv install -l <span class="p">|</span> grep anaconda3
  ・・・
  anaconda3-4.2.0
  anaconda3-4.3.0
  anaconda3-4.3.1
  anaconda3-4.4.0
  anaconda3-5.0.0
  anaconda3-5.0.1
  anaconda3-5.1.0
  anaconda3-5.2.0
  anaconda3-5.3.0
  anaconda3-5.3.1
  anaconda3-2018.12
  anaconda3-2019.03
  anaconda3-2019.07
  anaconda3-2019.10</code></pre></div>
<p>2018年12月からは、Anacondaのバージョンは発行年.発行月という表記方法に変わったので、2019年11月現在での最新版はanaconda3-2019.10である。</p>

<p>インストール方法は通常のPythonインストールと同様に<code>pyenv install</code>コマンドで指定する。</p>
<div class="highlight"><pre class="chroma"><code class="language-zsh" data-lang="zsh">% pyenv install anaconda3-2019.10</code></pre></div>
<p>pyenvでインストールした場合でも、インストーラを使用した場合と同様にツールも含めてインストールされる。</p>
<div class="edit-meta">
Last updated on 14 Nov 2019


<br>
Published on 14 Nov 2019
<br></div><nav class="pagination"><a class="nav nav-prev" href="/python/install/install_soft/" title="Pythonインストーラによるインストール"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - Pythonインストーラによるインストール</a>
<a class="nav nav-next" href="/java/" title="Java">Next - Java <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<nav class="open-menu">
<ul>
<li class=""><a href="https://midsatoh.github.io/">Home</a></li>

<li class="parent"><a href="/python/">Python</a>
  
<ul class="sub-menu">
<li class=""><a href="/python/python_aspects/">Pythonの特徴</a></li>

<li class="parent"><a href="/python/install/">環境設定</a>
  
<ul class="sub-menu">
<li class=""><a href="/python/install/anaconda/">Anacondaのインストール（インストーラ版）</a></li>
<li class=""><a href="/python/install/install_soft/">Pythonインストーラによるインストール</a></li>
<li class="active"><a href="/python/install/pyenv/">pyenvによるインストール（Mac）</a></li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="/java/">Java</a>
  
<ul class="sub-menu">

<li class=""><a href="/java/install/">環境設定</a>
  
<ul class="sub-menu">
<li class=""><a href="/java/install/openjdk/">OpenJDKのインストール</a></li>
<li class=""><a href="/java/install/eclipse/">Eclipseのインストールと設定</a></li>
</ul>
  
</li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
